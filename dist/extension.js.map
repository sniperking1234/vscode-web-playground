{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"vscode\"","webpack:///./src/extension.ts","webpack:///./src/memfs.ts","webpack:///./src/exampleFiles.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","updateDiagnostics","document","collection","fileName","set","uri","code","message","range","vscode","Range","Position","severity","DiagnosticSeverity","Error","source","relatedInformation","DiagnosticRelatedInformation","Location","Warning","clear","context","navigator","repositoryOwner","undefined","repositoryName","folder","workspace","workspaceFolders","scheme","authority","split","some","f","MemFS","workspaceFile","memFs","subscriptions","push","enableFs","seed","languages","createDiagnosticCollection","window","activeTextEditor","onDidChangeActiveTextEditor","editor","enableProblems","CustomBuildTaskProvider","workspaceRoot","this","getTasks","_task","definition","flavor","getTask","flags","tasks","forEach","flagGroup","type","CustomBuildScriptType","Task2","TaskScope","Workspace","join","CustomExecution","CustomBuildTaskTerminal","sharedState","state","_flavor","getSharedState","setSharedState","writeEmitter","EventEmitter","onDidWrite","event","closeEmitter","onDidClose","_initialDimensions","indexOf","pattern","fileWatcher","createFileSystemWatcher","onDidChange","doBuild","onDidCreate","onDidDelete","dispose","Promise","resolve","fire","isIncremental","setTimeout","date","Date","toTimeString","toDateString","registerTaskProvider","rootPath","enableTasks","commands","executeCommand","Uri","parse","registerCommand","env","openExternal","uriScheme","encodeURIComponent","File","FileType","ctime","now","mtime","size","Directory","entries","Map","textEncoder","TextEncoder","root","_emitter","_bufferedEvents","onDidChangeFile","_textDecoder","TextDecoder","disposable","Disposable","from","registerFileSystemProvider","isCaseSensitive","registerFileSearchProvider","registerTextSearchProvider","createDirectory","writeFile","encode","largeTSFile","overwrite","debuggableFile","getImageFile","Uint8Array","randomData","JSON","stringify","windows1251File","gbkFile","_lookup","entry","_lookupAsDirectory","result","child","data","_lookupAsFile","FileSystemError","FileNotFound","content","options","basename","_basename","path","parent","_lookupParentDirectory","FileIsADirectory","FileExists","_fireSoon","FileChangeType","Created","byteLength","Changed","oldUri","newUri","oldParent","newParent","newName","delete","Deleted","dirname","with","_dirname","has","silent","parts","part","FileNotADirectory","_resource","events","_fireSoonHandle","clearTimeout","length","_rtrim","substr","lastIndexOf","haystack","needle","needleLen","haystackLen","offset","idx","substring","files","Set","_doGetFiles","dir","add","replace","query","_options","_token","_findFiles","_getFiles","RegExp","_convertSimple2RegExpPattern","file","exec","progress","includes","lines","decode","readFile","line","index","report","ranges","preview","text","matches","limitHit","lineCnt","lineLen","Math","random","toString","atob","map","x","charCodeAt"],"mappings":"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","file":"extension.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","module.exports = require(\"vscode\");","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n\r\n//\r\n// ############################################################################\r\n//\r\n//\t\t\t\t\t\t! USED FOR RUNNING VSCODE OUT OF SOURCES FOR WEB !\r\n//\t\t\t\t\t\t\t\t\t\t! DO NOT REMOVE !\r\n//\r\n// ############################################################################\r\n//\r\n\r\nimport * as vscode from 'vscode';\r\nimport { MemFS } from './memfs';\r\n\r\ndeclare const navigator: unknown;\r\n\r\nexport function activate(context: vscode.ExtensionContext) {\r\n\tif (typeof navigator === 'object') {\t// do not run under node.js\r\n\r\n\t\t// Figure out if we have a repository\r\n\t\tlet repositoryOwner: string | undefined = undefined;\r\n\t\tlet repositoryName: string | undefined = undefined;\r\n\t\tfor (const folder of vscode.workspace.workspaceFolders) {\r\n\t\t\tif (folder.uri.scheme === 'github' || folder.uri.scheme === 'codespace') {\r\n\t\t\t\t[repositoryOwner, repositoryName] = folder.uri.authority.split('+');\r\n\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// memFs\r\n\t\tif (vscode.workspace.workspaceFolders?.some(f => f.uri.scheme === MemFS.scheme) || vscode.workspace.workspaceFile.scheme === MemFS.scheme) {\r\n\t\t\tconst memFs = enableFs(context);\r\n\t\t\tmemFs.seed();\r\n\t\t\tenableProblems(context);\r\n\t\t\tenableTasks();\r\n\r\n\t\t\tvscode.commands.executeCommand('vscode.open', vscode.Uri.parse(`memfs:/sample-folder/large.ts`));\r\n\t\t}\r\n\r\n\t\t// GH/CS\r\n\t\telse if (vscode.workspace.workspaceFolders?.some(f => f.uri.scheme === 'github' || f.uri.scheme === 'codespace')) {\r\n\t\t\tvscode.commands.executeCommand('setContext', 'github-context', true);\r\n\r\n\t\t\tif (repositoryOwner && repositoryName) {\r\n\t\t\t\tvscode.commands.registerCommand('vscode.webPlayground.cloneRepository', () => {\r\n\t\t\t\t\tvscode.env.openExternal(vscode.Uri.parse(`${vscode.env.uriScheme}://vscode.git/clone?url=${encodeURIComponent(`https://github.com/${repositoryOwner}/${repositoryName}.git`)}`));\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction enableFs(context: vscode.ExtensionContext): MemFS {\r\n\tconst memFs = new MemFS();\r\n\tcontext.subscriptions.push(memFs);\r\n\r\n\treturn memFs;\r\n}\r\n\r\nfunction enableProblems(context: vscode.ExtensionContext): void {\r\n\tconst collection = vscode.languages.createDiagnosticCollection('test');\r\n\tif (vscode.window.activeTextEditor) {\r\n\t\tupdateDiagnostics(vscode.window.activeTextEditor.document, collection);\r\n\t}\r\n\tcontext.subscriptions.push(vscode.window.onDidChangeActiveTextEditor(editor => {\r\n\t\tif (editor) {\r\n\t\t\tupdateDiagnostics(editor.document, collection);\r\n\t\t}\r\n\t}));\r\n}\r\n\r\nfunction updateDiagnostics(document: vscode.TextDocument, collection: vscode.DiagnosticCollection): void {\r\n\tif (document && document.fileName === '/sample-folder/large.ts') {\r\n\t\tcollection.set(document.uri, [{\r\n\t\t\tcode: '',\r\n\t\t\tmessage: 'cannot assign twice to immutable variable `storeHouses`',\r\n\t\t\trange: new vscode.Range(new vscode.Position(4, 12), new vscode.Position(4, 32)),\r\n\t\t\tseverity: vscode.DiagnosticSeverity.Error,\r\n\t\t\tsource: '',\r\n\t\t\trelatedInformation: [\r\n\t\t\t\tnew vscode.DiagnosticRelatedInformation(new vscode.Location(document.uri, new vscode.Range(new vscode.Position(1, 8), new vscode.Position(1, 9))), 'first assignment to `x`')\r\n\t\t\t]\r\n\t\t}, {\r\n\t\t\tcode: '',\r\n\t\t\tmessage: 'function does not follow naming conventions',\r\n\t\t\trange: new vscode.Range(new vscode.Position(7, 10), new vscode.Position(7, 23)),\r\n\t\t\tseverity: vscode.DiagnosticSeverity.Warning,\r\n\t\t\tsource: ''\r\n\t\t}]);\r\n\t} else {\r\n\t\tcollection.clear();\r\n\t}\r\n}\r\n\r\nfunction enableTasks(): void {\r\n\r\n\tinterface CustomBuildTaskDefinition extends vscode.TaskDefinition {\r\n\t\t/**\r\n\t\t * The build flavor. Should be either '32' or '64'.\r\n\t\t */\r\n\t\tflavor: string;\r\n\r\n\t\t/**\r\n\t\t * Additional build flags\r\n\t\t */\r\n\t\tflags?: string[];\r\n\t}\r\n\r\n\tclass CustomBuildTaskProvider implements vscode.TaskProvider {\r\n\t\tstatic CustomBuildScriptType: string = 'custombuildscript';\r\n\t\tprivate tasks: vscode.Task[] | undefined;\r\n\r\n\t\t// We use a CustomExecution task when state needs to be shared accross runs of the task or when\r\n\t\t// the task requires use of some VS Code API to run.\r\n\t\t// If you don't need to share state between runs and if you don't need to execute VS Code API in your task,\r\n\t\t// then a simple ShellExecution or ProcessExecution should be enough.\r\n\t\t// Since our build has this shared state, the CustomExecution is used below.\r\n\t\tprivate sharedState: string | undefined;\r\n\r\n\t\tconstructor(private workspaceRoot: string) { }\r\n\r\n\t\tasync provideTasks(): Promise<vscode.Task[]> {\r\n\t\t\treturn this.getTasks();\r\n\t\t}\r\n\r\n\t\tresolveTask(_task: vscode.Task): vscode.Task | undefined {\r\n\t\t\tconst flavor: string = _task.definition.flavor;\r\n\t\t\tif (flavor) {\r\n\t\t\t\tconst definition: CustomBuildTaskDefinition = <any>_task.definition;\r\n\t\t\t\treturn this.getTask(definition.flavor, definition.flags ? definition.flags : [], definition);\r\n\t\t\t}\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\r\n\t\tprivate getTasks(): vscode.Task[] {\r\n\t\t\tif (this.tasks !== undefined) {\r\n\t\t\t\treturn this.tasks;\r\n\t\t\t}\r\n\t\t\t// In our fictional build, we have two build flavors\r\n\t\t\tconst flavors: string[] = ['32', '64'];\r\n\t\t\t// Each flavor can have some options.\r\n\t\t\tconst flags: string[][] = [['watch', 'incremental'], ['incremental'], []];\r\n\r\n\t\t\tthis.tasks = [];\r\n\t\t\tflavors.forEach(flavor => {\r\n\t\t\t\tflags.forEach(flagGroup => {\r\n\t\t\t\t\tthis.tasks!.push(this.getTask(flavor, flagGroup));\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\treturn this.tasks;\r\n\t\t}\r\n\r\n\t\tprivate getTask(flavor: string, flags: string[], definition?: CustomBuildTaskDefinition): vscode.Task {\r\n\t\t\tif (definition === undefined) {\r\n\t\t\t\tdefinition = {\r\n\t\t\t\t\ttype: CustomBuildTaskProvider.CustomBuildScriptType,\r\n\t\t\t\t\tflavor,\r\n\t\t\t\t\tflags\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn new vscode.Task2(definition, vscode.TaskScope.Workspace, `${flavor} ${flags.join(' ')}`,\r\n\t\t\t\tCustomBuildTaskProvider.CustomBuildScriptType, new vscode.CustomExecution(async (): Promise<vscode.Pseudoterminal> => {\r\n\t\t\t\t\t// When the task is executed, this callback will run. Here, we setup for running the task.\r\n\t\t\t\t\treturn new CustomBuildTaskTerminal(this.workspaceRoot, flavor, flags, () => this.sharedState, (state: string) => this.sharedState = state);\r\n\t\t\t\t}));\r\n\t\t}\r\n\t}\r\n\r\n\tclass CustomBuildTaskTerminal implements vscode.Pseudoterminal {\r\n\t\tprivate writeEmitter = new vscode.EventEmitter<string>();\r\n\t\tonDidWrite: vscode.Event<string> = this.writeEmitter.event;\r\n\t\tprivate closeEmitter = new vscode.EventEmitter<void>();\r\n\t\tonDidClose?: vscode.Event<void> = this.closeEmitter.event;\r\n\r\n\t\tprivate fileWatcher: vscode.FileSystemWatcher | undefined;\r\n\r\n\t\tconstructor(private workspaceRoot: string, _flavor: string, private flags: string[], private getSharedState: () => string | undefined, private setSharedState: (state: string) => void) {\r\n\t\t}\r\n\r\n\t\topen(_initialDimensions: vscode.TerminalDimensions | undefined): void {\r\n\t\t\t// At this point we can start using the terminal.\r\n\t\t\tif (this.flags.indexOf('watch') > -1) {\r\n\t\t\t\tlet pattern = this.workspaceRoot + '/customBuildFile';\r\n\t\t\t\tthis.fileWatcher = vscode.workspace.createFileSystemWatcher(pattern);\r\n\t\t\t\tthis.fileWatcher.onDidChange(() => this.doBuild());\r\n\t\t\t\tthis.fileWatcher.onDidCreate(() => this.doBuild());\r\n\t\t\t\tthis.fileWatcher.onDidDelete(() => this.doBuild());\r\n\t\t\t}\r\n\t\t\tthis.doBuild();\r\n\t\t}\r\n\r\n\t\tclose(): void {\r\n\t\t\t// The terminal has been closed. Shutdown the build.\r\n\t\t\tif (this.fileWatcher) {\r\n\t\t\t\tthis.fileWatcher.dispose();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tprivate async doBuild(): Promise<void> {\r\n\t\t\treturn new Promise<void>((resolve) => {\r\n\t\t\t\tthis.writeEmitter.fire('Starting build...\\r\\n');\r\n\t\t\t\tlet isIncremental = this.flags.indexOf('incremental') > -1;\r\n\t\t\t\tif (isIncremental) {\r\n\t\t\t\t\tif (this.getSharedState()) {\r\n\t\t\t\t\t\tthis.writeEmitter.fire('Using last build results: ' + this.getSharedState() + '\\r\\n');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tisIncremental = false;\r\n\t\t\t\t\t\tthis.writeEmitter.fire('No result from last build. Doing full build.\\r\\n');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Since we don't actually build anything in this example set a timeout instead.\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tconst date = new Date();\r\n\t\t\t\t\tthis.setSharedState(date.toTimeString() + ' ' + date.toDateString());\r\n\t\t\t\t\tthis.writeEmitter.fire('Build complete.\\r\\n\\r\\n');\r\n\t\t\t\t\tif (this.flags.indexOf('watch') === -1) {\r\n\t\t\t\t\t\tthis.closeEmitter.fire();\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t}\r\n\t\t\t\t}, isIncremental ? 1000 : 4000);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tvscode.tasks.registerTaskProvider(CustomBuildTaskProvider.CustomBuildScriptType, new CustomBuildTaskProvider(vscode.workspace.rootPath!));\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n\r\nimport {\r\n\tCancellationToken,\r\n\tDisposable,\r\n\tEvent,\r\n\tEventEmitter,\r\n\tFileChangeEvent,\r\n\tFileChangeType,\r\n\tFileSearchOptions,\r\n\tFileSearchProvider,\r\n\tFileSearchQuery,\r\n\tFileStat,\r\n\tFileSystemError,\r\n\tFileSystemProvider,\r\n\tFileType,\r\n\tPosition,\r\n\tProgress,\r\n\tProviderResult,\r\n\tRange,\r\n\tTextSearchComplete,\r\n\tTextSearchOptions,\r\n\tTextSearchQuery,\r\n\tTextSearchProvider,\r\n\tTextSearchResult,\r\n\tUri,\r\n\tworkspace,\r\n} from 'vscode';\r\nimport { largeTSFile, getImageFile, debuggableFile, windows1251File, gbkFile } from './exampleFiles';\r\n\r\nexport class File implements FileStat {\r\n\r\n\ttype: FileType;\r\n\tctime: number;\r\n\tmtime: number;\r\n\tsize: number;\r\n\r\n\tname: string;\r\n\tdata?: Uint8Array;\r\n\r\n\tconstructor(public uri: Uri, name: string) {\r\n\t\tthis.type = FileType.File;\r\n\t\tthis.ctime = Date.now();\r\n\t\tthis.mtime = Date.now();\r\n\t\tthis.size = 0;\r\n\t\tthis.name = name;\r\n\t}\r\n}\r\n\r\nexport class Directory implements FileStat {\r\n\r\n\ttype: FileType;\r\n\tctime: number;\r\n\tmtime: number;\r\n\tsize: number;\r\n\r\n\tname: string;\r\n\tentries: Map<string, File | Directory>;\r\n\r\n\tconstructor(public uri: Uri, name: string) {\r\n\t\tthis.type = FileType.Directory;\r\n\t\tthis.ctime = Date.now();\r\n\t\tthis.mtime = Date.now();\r\n\t\tthis.size = 0;\r\n\t\tthis.name = name;\r\n\t\tthis.entries = new Map();\r\n\t}\r\n}\r\n\r\nexport type Entry = File | Directory;\r\n\r\nconst textEncoder = new TextEncoder();\r\n\r\nexport class MemFS implements FileSystemProvider, FileSearchProvider, TextSearchProvider, Disposable {\r\n\tstatic scheme = 'memfs';\r\n\r\n\tprivate readonly disposable: Disposable;\r\n\r\n\tconstructor() {\r\n\t\tthis.disposable = Disposable.from(\r\n\t\t\tworkspace.registerFileSystemProvider(MemFS.scheme, this, { isCaseSensitive: true }),\r\n\t\t\tworkspace.registerFileSearchProvider(MemFS.scheme, this),\r\n\t\t\tworkspace.registerTextSearchProvider(MemFS.scheme, this)\r\n\t\t);\r\n\t}\r\n\r\n\tdispose() {\r\n\t\tthis.disposable?.dispose();\r\n\t}\r\n\r\n\tseed() {\r\n\t\tthis.createDirectory(Uri.parse(`memfs:/sample-folder/`));\r\n\r\n\t\t// most common files types\r\n\t\tthis.writeFile(Uri.parse(`memfs:/sample-folder/large.ts`), textEncoder.encode(largeTSFile), { create: true, overwrite: true });\r\n\t\tthis.writeFile(Uri.parse(`memfs:/sample-folder/file.txt`), textEncoder.encode('foo'), { create: true, overwrite: true });\r\n\t\tthis.writeFile(Uri.parse(`memfs:/sample-folder/file.html`), textEncoder.encode('<html><body><h1 class=\"hd\">Hello</h1></body></html>'), { create: true, overwrite: true });\r\n\t\tthis.writeFile(Uri.parse(`memfs:/sample-folder/file.js`), textEncoder.encode('console.log(\"JavaScript\")'), { create: true, overwrite: true });\r\n\t\tthis.writeFile(Uri.parse(`memfs:/sample-folder/file.json`), textEncoder.encode('{ \"json\": true }'), { create: true, overwrite: true });\r\n\t\tthis.writeFile(Uri.parse(`memfs:/sample-folder/file.ts`), textEncoder.encode('console.log(\"TypeScript\")'), { create: true, overwrite: true });\r\n\t\tthis.writeFile(Uri.parse(`memfs:/sample-folder/file.css`), textEncoder.encode('* { color: green; }'), { create: true, overwrite: true });\r\n\t\tthis.writeFile(Uri.parse(`memfs:/sample-folder/file.md`), textEncoder.encode(debuggableFile), { create: true, overwrite: true });\r\n\t\tthis.writeFile(Uri.parse(`memfs:/sample-folder/file.xml`), textEncoder.encode('<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\" ?>'), { create: true, overwrite: true });\r\n\t\tthis.writeFile(Uri.parse(`memfs:/sample-folder/file.py`), textEncoder.encode('import base64, sys; base64.decode(open(sys.argv[1], \"rb\"), open(sys.argv[2], \"wb\"))'), { create: true, overwrite: true });\r\n\t\tthis.writeFile(Uri.parse(`memfs:/sample-folder/file.yaml`), textEncoder.encode('- just: write something'), { create: true, overwrite: true });\r\n\t\tthis.writeFile(Uri.parse(`memfs:/sample-folder/file.jpg`), getImageFile(), { create: true, overwrite: true });\r\n\t\tthis.writeFile(Uri.parse(`memfs:/sample-folder/file.php`), textEncoder.encode('<?php echo \"Hello World!\"; ?>'), { create: true, overwrite: true });\r\n\r\n\t\t// some more files & folders\r\n\t\tthis.createDirectory(Uri.parse(`memfs:/sample-folder/folder/`));\r\n\t\tthis.createDirectory(Uri.parse(`memfs:/sample-folder/workspaces/`));\r\n\t\tthis.createDirectory(Uri.parse(`memfs:/sample-folder/large/`));\r\n\t\tthis.createDirectory(Uri.parse(`memfs:/sample-folder/xyz/`));\r\n\t\tthis.createDirectory(Uri.parse(`memfs:/sample-folder/xyz/abc`));\r\n\t\tthis.createDirectory(Uri.parse(`memfs:/sample-folder/xyz/def`));\r\n\r\n\t\tthis.writeFile(Uri.parse(`memfs:/sample-folder/folder/empty.txt`), new Uint8Array(0), { create: true, overwrite: true });\r\n\t\tthis.writeFile(Uri.parse(`memfs:/sample-folder/folder/empty.foo`), new Uint8Array(0), { create: true, overwrite: true });\r\n\t\tthis.writeFile(Uri.parse(`memfs:/sample-folder/folder/file.ts`), textEncoder.encode('let a:number = true; console.log(a);'), { create: true, overwrite: true });\r\n\t\tthis.writeFile(Uri.parse(`memfs:/sample-folder/large/rnd.foo`), randomData(50000), { create: true, overwrite: true });\r\n\t\tthis.writeFile(Uri.parse(`memfs:/sample-folder/xyz/UPPER.txt`), textEncoder.encode('UPPER'), { create: true, overwrite: true });\r\n\t\tthis.writeFile(Uri.parse(`memfs:/sample-folder/xyz/upper.txt`), textEncoder.encode('upper'), { create: true, overwrite: true });\r\n\t\tthis.writeFile(Uri.parse(`memfs:/sample-folder/xyz/def/foo.md`), textEncoder.encode('*MemFS*'), { create: true, overwrite: true });\r\n\t\tthis.writeFile(Uri.parse(`memfs:/sample-folder/workspaces/mem.code-workspace`), textEncoder.encode(JSON.stringify({\r\n\t\t\t\"folders\": [\r\n\t\t\t\t{\r\n\t\t\t\t\t\"name\": \"sample-folder-large\",\r\n\t\t\t\t\t\"uri\": \"memfs:/sample-folder/large\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"name\": \"sample-folder-xyz\",\r\n\t\t\t\t\t\"uri\": \"memfs:/sample-folder/xyz\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"name\": \"sample-folder-folder\",\r\n\t\t\t\t\t\"uri\": \"memfs:/sample-folder/folder\"\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}, undefined, '\\t')), { create: true, overwrite: true });\r\n\r\n\t\t// some files in different encodings\r\n\t\tthis.createDirectory(Uri.parse(`memfs:/sample-folder/encodings/`));\r\n\t\tthis.writeFile(\r\n\t\t\tUri.parse(`memfs:/sample-folder/encodings/windows1251.txt`),\r\n\t\t\twindows1251File,\r\n\t\t\t{ create: true, overwrite: true }\r\n\t\t);\r\n\t\tthis.writeFile(\r\n\t\t\tUri.parse(`memfs:/sample-folder/encodings/gbk.txt`),\r\n\t\t\tgbkFile,\r\n\t\t\t{ create: true, overwrite: true }\r\n\t\t);\r\n\r\n\r\n\t\tvar num = 10000;\r\n\t\tvar i;\r\n\t\tfor (i = num; i >= 1; i--) {\r\n\t\t\tthis.writeFile(Uri.parse(`memfs:/sample-folder/large/rnd.foo` + randomData(10)), randomData(500), { create: true, overwrite: true });\r\n\t\t}\r\n\t}\r\n\r\n\troot = new Directory(Uri.parse('memfs:/'), '');\r\n\r\n\t// --- manage file metadata\r\n\r\n\tstat(uri: Uri): FileStat {\r\n\t\treturn this._lookup(uri, false);\r\n\t}\r\n\r\n\treadDirectory(uri: Uri): [string, FileType][] {\r\n\t\tconst entry = this._lookupAsDirectory(uri, false);\r\n\t\tlet result: [string, FileType][] = [];\r\n\t\tfor (const [name, child] of entry.entries) {\r\n\t\t\tresult.push([name, child.type]);\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\t// --- manage file contents\r\n\r\n\treadFile(uri: Uri): Uint8Array {\r\n\t\tconst data = this._lookupAsFile(uri, false).data;\r\n\t\tif (data) {\r\n\t\t\treturn data;\r\n\t\t}\r\n\t\tthrow FileSystemError.FileNotFound();\r\n\t}\r\n\r\n\twriteFile(uri: Uri, content: Uint8Array, options: { create: boolean, overwrite: boolean }): void {\r\n\t\tlet basename = this._basename(uri.path);\r\n\t\tlet parent = this._lookupParentDirectory(uri);\r\n\t\tlet entry = parent.entries.get(basename);\r\n\t\tif (entry instanceof Directory) {\r\n\t\t\tthrow FileSystemError.FileIsADirectory(uri);\r\n\t\t}\r\n\t\tif (!entry && !options.create) {\r\n\t\t\tthrow FileSystemError.FileNotFound(uri);\r\n\t\t}\r\n\t\tif (entry && options.create && !options.overwrite) {\r\n\t\t\tthrow FileSystemError.FileExists(uri);\r\n\t\t}\r\n\t\tif (!entry) {\r\n\t\t\tentry = new File(uri, basename);\r\n\t\t\tparent.entries.set(basename, entry);\r\n\t\t\tthis._fireSoon({ type: FileChangeType.Created, uri });\r\n\t\t}\r\n\t\tentry.mtime = Date.now();\r\n\t\tentry.size = content.byteLength;\r\n\t\tentry.data = content;\r\n\r\n\t\tthis._fireSoon({ type: FileChangeType.Changed, uri });\r\n\t}\r\n\r\n\t// --- manage files/folders\r\n\r\n\trename(oldUri: Uri, newUri: Uri, options: { overwrite: boolean }): void {\r\n\t\tif (!options.overwrite && this._lookup(newUri, true)) {\r\n\t\t\tthrow FileSystemError.FileExists(newUri);\r\n\t\t}\r\n\r\n\t\tlet entry = this._lookup(oldUri, false);\r\n\t\tlet oldParent = this._lookupParentDirectory(oldUri);\r\n\r\n\t\tlet newParent = this._lookupParentDirectory(newUri);\r\n\t\tlet newName = this._basename(newUri.path);\r\n\r\n\t\toldParent.entries.delete(entry.name);\r\n\t\tentry.name = newName;\r\n\t\tnewParent.entries.set(newName, entry);\r\n\r\n\t\tthis._fireSoon(\r\n\t\t\t{ type: FileChangeType.Deleted, uri: oldUri },\r\n\t\t\t{ type: FileChangeType.Created, uri: newUri }\r\n\t\t);\r\n\t}\r\n\r\n\tdelete(uri: Uri): void {\r\n\t\tlet dirname = uri.with({ path: this._dirname(uri.path) });\r\n\t\tlet basename = this._basename(uri.path);\r\n\t\tlet parent = this._lookupAsDirectory(dirname, false);\r\n\t\tif (!parent.entries.has(basename)) {\r\n\t\t\tthrow FileSystemError.FileNotFound(uri);\r\n\t\t}\r\n\t\tparent.entries.delete(basename);\r\n\t\tparent.mtime = Date.now();\r\n\t\tparent.size -= 1;\r\n\t\tthis._fireSoon({ type: FileChangeType.Changed, uri: dirname }, { uri, type: FileChangeType.Deleted });\r\n\t}\r\n\r\n\tcreateDirectory(uri: Uri): void {\r\n\t\tlet basename = this._basename(uri.path);\r\n\t\tlet dirname = uri.with({ path: this._dirname(uri.path) });\r\n\t\tlet parent = this._lookupAsDirectory(dirname, false);\r\n\r\n\t\tlet entry = new Directory(uri, basename);\r\n\t\tparent.entries.set(entry.name, entry);\r\n\t\tparent.mtime = Date.now();\r\n\t\tparent.size += 1;\r\n\t\tthis._fireSoon({ type: FileChangeType.Changed, uri: dirname }, { type: FileChangeType.Created, uri });\r\n\t}\r\n\r\n\t// --- lookup\r\n\r\n\tprivate _lookup(uri: Uri, silent: false): Entry;\r\n\tprivate _lookup(uri: Uri, silent: boolean): Entry | undefined;\r\n\tprivate _lookup(uri: Uri, silent: boolean): Entry | undefined {\r\n\t\tlet parts = uri.path.split('/');\r\n\t\tlet entry: Entry = this.root;\r\n\t\tfor (const part of parts) {\r\n\t\t\tif (!part) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tlet child: Entry | undefined;\r\n\t\t\tif (entry instanceof Directory) {\r\n\t\t\t\tchild = entry.entries.get(part);\r\n\t\t\t}\r\n\t\t\tif (!child) {\r\n\t\t\t\tif (!silent) {\r\n\t\t\t\t\tthrow FileSystemError.FileNotFound(uri);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tentry = child;\r\n\t\t}\r\n\t\treturn entry;\r\n\t}\r\n\r\n\tprivate _lookupAsDirectory(uri: Uri, silent: boolean): Directory {\r\n\t\tlet entry = this._lookup(uri, silent);\r\n\t\tif (entry instanceof Directory) {\r\n\t\t\treturn entry;\r\n\t\t}\r\n\t\tthrow FileSystemError.FileNotADirectory(uri);\r\n\t}\r\n\r\n\tprivate _lookupAsFile(uri: Uri, silent: boolean): File {\r\n\t\tlet entry = this._lookup(uri, silent);\r\n\t\tif (entry instanceof File) {\r\n\t\t\treturn entry;\r\n\t\t}\r\n\t\tthrow FileSystemError.FileIsADirectory(uri);\r\n\t}\r\n\r\n\tprivate _lookupParentDirectory(uri: Uri): Directory {\r\n\t\tconst dirname = uri.with({ path: this._dirname(uri.path) });\r\n\t\treturn this._lookupAsDirectory(dirname, false);\r\n\t}\r\n\r\n\t// --- manage file events\r\n\r\n\tprivate _emitter = new EventEmitter<FileChangeEvent[]>();\r\n\tprivate _bufferedEvents: FileChangeEvent[] = [];\r\n\tprivate _fireSoonHandle?: any;\r\n\r\n\treadonly onDidChangeFile: Event<FileChangeEvent[]> = this._emitter.event;\r\n\r\n\twatch(_resource: Uri): Disposable {\r\n\t\t// ignore, fires for all changes...\r\n\t\treturn new Disposable(() => { });\r\n\t}\r\n\r\n\tprivate _fireSoon(...events: FileChangeEvent[]): void {\r\n\t\tthis._bufferedEvents.push(...events);\r\n\r\n\t\tif (this._fireSoonHandle) {\r\n\t\t\tclearTimeout(this._fireSoonHandle);\r\n\t\t}\r\n\r\n\t\tthis._fireSoonHandle = setTimeout(() => {\r\n\t\t\tthis._emitter.fire(this._bufferedEvents);\r\n\t\t\tthis._bufferedEvents.length = 0;\r\n\t\t}, 5);\r\n\t}\r\n\r\n\t// --- path utils\r\n\r\n\tprivate _basename(path: string): string {\r\n\t\tpath = this._rtrim(path, '/');\r\n\t\tif (!path) {\r\n\t\t\treturn '';\r\n\t\t}\r\n\r\n\t\treturn path.substr(path.lastIndexOf('/') + 1);\r\n\t}\r\n\r\n\tprivate _dirname(path: string): string {\r\n\t\tpath = this._rtrim(path, '/');\r\n\t\tif (!path) {\r\n\t\t\treturn '/';\r\n\t\t}\r\n\r\n\t\treturn path.substr(0, path.lastIndexOf('/'));\r\n\t}\r\n\r\n\tprivate _rtrim(haystack: string, needle: string): string {\r\n\t\tif (!haystack || !needle) {\r\n\t\t\treturn haystack;\r\n\t\t}\r\n\r\n\t\tconst needleLen = needle.length,\r\n\t\t\thaystackLen = haystack.length;\r\n\r\n\t\tif (needleLen === 0 || haystackLen === 0) {\r\n\t\t\treturn haystack;\r\n\t\t}\r\n\r\n\t\tlet offset = haystackLen,\r\n\t\t\tidx = -1;\r\n\r\n\t\twhile (true) {\r\n\t\t\tidx = haystack.lastIndexOf(needle, offset - 1);\r\n\t\t\tif (idx === -1 || idx + needleLen !== offset) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (idx === 0) {\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\t\t\toffset = idx;\r\n\t\t}\r\n\r\n\t\treturn haystack.substring(0, offset);\r\n\t}\r\n\r\n\tprivate _getFiles(): Set<File> {\r\n\t\tconst files = new Set<File>();\r\n\r\n\t\tthis._doGetFiles(this.root, files);\r\n\r\n\t\treturn files;\r\n\t}\r\n\r\n\tprivate _doGetFiles(dir: Directory, files: Set<File>): void {\r\n\t\tdir.entries.forEach(entry => {\r\n\t\t\tif (entry instanceof File) {\r\n\t\t\t\tfiles.add(entry);\r\n\t\t\t} else {\r\n\t\t\t\tthis._doGetFiles(entry, files);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate _convertSimple2RegExpPattern(pattern: string): string {\r\n\t\treturn pattern.replace(/[\\-\\\\\\{\\}\\+\\?\\|\\^\\$\\.\\,\\[\\]\\(\\)\\#\\s]/g, '\\\\$&').replace(/[\\*]/g, '.*');\r\n\t}\r\n\r\n\t// --- search provider\r\n\r\n\tprovideFileSearchResults(query: FileSearchQuery, _options: FileSearchOptions, _token: CancellationToken): ProviderResult<Uri[]> {\r\n\t\treturn this._findFiles(query.pattern);\r\n\t}\r\n\r\n\tprivate _findFiles(query: string | undefined): Uri[] {\r\n\t\tconst files = this._getFiles();\r\n\t\tconst result: Uri[] = [];\r\n\r\n\t\tconst pattern = query ? new RegExp(this._convertSimple2RegExpPattern(query)) : null;\r\n\r\n\t\tfor (const file of files) {\r\n\t\t\tif (!pattern || pattern.exec(file.name)) {\r\n\t\t\t\tresult.push(file.uri);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tprivate _textDecoder = new TextDecoder();\r\n\r\n\tprovideTextSearchResults(query: TextSearchQuery, options: TextSearchOptions, progress: Progress<TextSearchResult>, _token: CancellationToken) {\r\n\t\tconst result: TextSearchComplete = { limitHit: false };\r\n\r\n\t\tconst files = this._findFiles(options.includes[0]);\r\n\t\tif (files) {\r\n\t\t\tfor (const file of files) {\r\n\t\t\t\tconst content = this._textDecoder.decode(this.readFile(file));\r\n\r\n\t\t\t\tconst lines = content.split('\\n');\r\n\t\t\t\tfor (let i = 0; i < lines.length; i++) {\r\n\t\t\t\t\tconst line = lines[i];\r\n\t\t\t\t\tconst index = line.indexOf(query.pattern);\r\n\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\tprogress.report({\r\n\t\t\t\t\t\t\turi: file,\r\n\t\t\t\t\t\t\tranges: new Range(new Position(i, index), new Position(i, index + query.pattern.length)),\r\n\t\t\t\t\t\t\tpreview: {\r\n\t\t\t\t\t\t\t\ttext: line,\r\n\t\t\t\t\t\t\t\tmatches: new Range(new Position(0, index), new Position(0, index + query.pattern.length))\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n}\r\n\r\nfunction randomData(lineCnt: number, lineLen = 155): Uint8Array {\r\n\tlet lines: string[] = [];\r\n\tfor (let i = 0; i < lineCnt; i++) {\r\n\t\tlet line = '';\r\n\t\twhile (line.length < lineLen) {\r\n\t\t\tline += Math.random().toString(2 + (i % 34)).substr(2);\r\n\t\t}\r\n\t\tlines.push(line.substr(0, lineLen));\r\n\t}\r\n\treturn textEncoder.encode(lines.join('\\n'));\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n\r\nexport const largeTSFile = `/// <reference path=\"lib/Geometry.ts\"/>\r\n/// <reference path=\"Game.ts\"/>\r\n\r\nmodule Mankala {\r\nexport var storeHouses = [6,13];\r\nexport var svgNS = 'http://www.w3.org/2000/svg';\r\n\r\nfunction createSVGRect(r:Rectangle) {\r\n\tvar rect = document.createElementNS(svgNS,'rect');\r\n\trect.setAttribute('x', r.x.toString());\r\n\trect.setAttribute('y', r.y.toString());\r\n\trect.setAttribute('width', r.width.toString());\r\n\trect.setAttribute('height', r.height.toString());\r\n\treturn rect;\r\n}\r\n\r\nfunction createSVGEllipse(r:Rectangle) {\r\n\tvar ell = document.createElementNS(svgNS,'ellipse');\r\n\tell.setAttribute('rx',(r.width/2).toString());\r\n\tell.setAttribute('ry',(r.height/2).toString());\r\n\tell.setAttribute('cx',(r.x+r.width/2).toString());\r\n\tell.setAttribute('cy',(r.y+r.height/2).toString());\r\n\treturn ell;\r\n}\r\n\r\nfunction createSVGEllipsePolar(angle:number,radius:number,tx:number,ty:number,cxo:number,cyo:number) {\r\n\tvar ell = document.createElementNS(svgNS,'ellipse');\r\n\tell.setAttribute('rx',radius.toString());\r\n\tell.setAttribute('ry',(radius/3).toString());\r\n\tell.setAttribute('cx',cxo.toString());\r\n\tell.setAttribute('cy',cyo.toString());\r\n\tvar dangle = angle*(180/Math.PI);\r\n\tell.setAttribute('transform','rotate('+dangle+','+cxo+','+cyo+') translate('+tx+','+ty+')');\r\n\treturn ell;\r\n}\r\n\r\nfunction createSVGInscribedCircle(sq:Square) {\r\n\tvar circle = document.createElementNS(svgNS,'circle');\r\n\tcircle.setAttribute('r',(sq.length/2).toString());\r\n\tcircle.setAttribute('cx',(sq.x+(sq.length/2)).toString());\r\n\tcircle.setAttribute('cy',(sq.y+(sq.length/2)).toString());\r\n\treturn circle;\r\n}\r\n\r\nexport class Position {\r\n\r\n\tseedCounts:number[];\r\n\tstartMove:number;\r\n\tturn:number;\r\n\r\n\tconstructor(seedCounts:number[],startMove:number,turn:number) {\r\n\t\tthis.seedCounts = seedCounts;\r\n\t\tthis.startMove = startMove;\r\n\t\tthis.turn = turn;\r\n\t}\r\n\r\n\tscore() {\r\n\t\tvar baseScore = this.seedCounts[storeHouses[1-this.turn]]-this.seedCounts[storeHouses[this.turn]];\r\n\t\tvar otherSpaces = homeSpaces[this.turn];\r\n\t\tvar sum = 0;\r\n\t\tfor (var k = 0,len = otherSpaces.length;k<len;k++) {\r\n\t\t\tsum += this.seedCounts[otherSpaces[k]];\r\n\t\t}\r\n\t\tif (sum==0) {\r\n\t\t\tvar mySpaces = homeSpaces[1-this.turn];\r\n\t\t\tvar mySum = 0;\r\n\t\t\tfor (var j = 0,len = mySpaces.length;j<len;j++) {\r\n\t\t\t\tmySum += this.seedCounts[mySpaces[j]];\r\n\t\t\t}\r\n\r\n\t\t\tbaseScore -= mySum;\r\n\t\t}\r\n\t\treturn baseScore;\r\n\t}\r\n\r\n\tmove(space:number,nextSeedCounts:number[],features:Features):boolean {\r\n\t\tif ((space==storeHouses[0])||(space==storeHouses[1])) {\r\n\t\t\t// can't move seeds in storehouse\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (this.seedCounts[space]>0) {\r\n\t\t\tfeatures.clear();\r\n\t\t\tvar len = this.seedCounts.length;\r\n\t\t\tfor (var i = 0;i<len;i++) {\r\n\t\t\t\tnextSeedCounts[i] = this.seedCounts[i];\r\n\t\t\t}\r\n\t\t\tvar seedCount = this.seedCounts[space];\r\n\t\t\tnextSeedCounts[space] = 0;\r\n\t\t\tvar nextSpace = (space+1)%14;\r\n\r\n\t\t\twhile (seedCount>0) {\r\n\t\t\t\tif (nextSpace==storeHouses[this.turn]) {\r\n\t\t\t\t\tfeatures.seedStoredCount++;\r\n\t\t\t\t}\r\n\t\t\t\tif ((nextSpace!=storeHouses[1-this.turn])) {\r\n\t\t\t\t\tnextSeedCounts[nextSpace]++;\r\n\t\t\t\t\tseedCount--;\r\n\t\t\t\t}\r\n\t\t\t\tif (seedCount==0) {\r\n\t\t\t\t\tif (nextSpace==storeHouses[this.turn]) {\r\n\t\t\t\t\t\tfeatures.turnContinues = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif ((nextSeedCounts[nextSpace]==1)&&\r\n\t\t\t\t\t\t\t(nextSpace>=firstHomeSpace[this.turn])&&\r\n\t\t\t\t\t\t\t(nextSpace<=lastHomeSpace[this.turn])) {\r\n\t\t\t\t\t\t\t// capture\r\n\t\t\t\t\t\t\tvar capturedSpace = capturedSpaces[nextSpace];\r\n\t\t\t\t\t\t\tif (capturedSpace>=0) {\r\n\t\t\t\t\t\t\t\tfeatures.spaceCaptured = capturedSpace;\r\n\t\t\t\t\t\t\t\tfeatures.capturedCount = nextSeedCounts[capturedSpace];\r\n\t\t\t\t\t\t\t\tnextSeedCounts[capturedSpace] = 0;\r\n\t\t\t\t\t\t\t\tnextSeedCounts[storeHouses[this.turn]] += features.capturedCount;\r\n\t\t\t\t\t\t\t\tfeatures.seedStoredCount += nextSeedCounts[capturedSpace];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tnextSpace = (nextSpace+1)%14;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class SeedCoords {\r\n\ttx:number;\r\n\tty:number;\r\n\tangle:number;\r\n\r\n\tconstructor(tx:number, ty:number, angle:number) {\r\n\t\tthis.tx = tx;\r\n\t\tthis.ty = ty;\r\n\t\tthis.angle = angle;\r\n\t}\r\n}\r\n\r\nexport class DisplayPosition extends Position {\r\n\r\n\tconfig:SeedCoords[][];\r\n\r\n\tconstructor(seedCounts:number[],startMove:number,turn:number) {\r\n\t\tsuper(seedCounts,startMove,turn);\r\n\r\n\t\tthis.config = [];\r\n\r\n\t\tfor (var i = 0;i<seedCounts.length;i++) {\r\n\t\t\tthis.config[i] = new Array<SeedCoords>();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tseedCircleRect(rect:Rectangle,seedCount:number,board:Element,seed:number) {\r\n\t\tvar coords = this.config[seed];\r\n\t\tvar sq = rect.inner(0.95).square();\r\n\t\tvar cxo = (sq.width/2)+sq.x;\r\n\t\tvar cyo = (sq.height/2)+sq.y;\r\n\t\tvar seedNumbers = [5,7,9,11];\r\n\t\tvar ringIndex = 0;\r\n\t\tvar ringRem = seedNumbers[ringIndex];\r\n\t\tvar angleDelta = (2*Math.PI)/ringRem;\r\n\t\tvar angle = angleDelta;\r\n\t\tvar seedLength = sq.width/(seedNumbers.length<<1);\r\n\t\tvar crMax = sq.width/2-(seedLength/2);\r\n\t\tvar pit = createSVGInscribedCircle(sq);\r\n\t\tif (seed<7) {\r\n\t\t\tpit.setAttribute('fill','brown');\r\n\t\t}\r\n\t\telse {\r\n\t\t\tpit.setAttribute('fill','saddlebrown');\r\n\t\t}\r\n\t\tboard.appendChild(pit);\r\n\t\tvar seedsSeen = 0;\r\n\t\twhile (seedCount > 0) {\r\n\t\t\tif (ringRem == 0) {\r\n\t\t\t\tringIndex++;\r\n\t\t\t\tringRem = seedNumbers[ringIndex];\r\n\t\t\t\tangleDelta = (2*Math.PI)/ringRem;\r\n\t\t\t\tangle = angleDelta;\r\n\t\t\t}\r\n\t\t\tvar tx:number;\r\n\t\t\tvar ty:number;\r\n\t\t\tvar tangle = angle;\r\n\t\t\tif (coords.length>seedsSeen) {\r\n\t\t\t\ttx = coords[seedsSeen].tx;\r\n\t\t\t\tty = coords[seedsSeen].ty;\r\n\t\t\t\ttangle = coords[seedsSeen].angle;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\ttx = (Math.random()*crMax)-(crMax/3);\r\n\t\t\t\tty = (Math.random()*crMax)-(crMax/3);\r\n\t\t\t\tcoords[seedsSeen] = new SeedCoords(tx,ty,angle);\r\n\t\t\t}\r\n\t\t\tvar ell = createSVGEllipsePolar(tangle,seedLength,tx,ty,cxo,cyo);\r\n\t\t\tboard.appendChild(ell);\r\n\t\t\tangle += angleDelta;\r\n\t\t\tringRem--;\r\n\t\t\tseedCount--;\r\n\t\t\tseedsSeen++;\r\n\t\t}\r\n\t}\r\n\r\n\ttoCircleSVG() {\r\n\t\tvar seedDivisions = 14;\r\n\t\tvar board = document.createElementNS(svgNS,'svg');\r\n\t\tvar boardRect = new Rectangle(0,0,1800,800);\r\n\t\tboard.setAttribute('width','1800');\r\n\t\tboard.setAttribute('height','800');\r\n\t\tvar whole = createSVGRect(boardRect);\r\n\t\twhole.setAttribute('fill','tan');\r\n\t\tboard.appendChild(whole);\r\n\t\tvar labPlayLab = boardRect.proportionalSplitVert(20,760,20);\r\n\t\tvar playSurface = labPlayLab[1];\r\n\t\tvar storeMainStore = playSurface.proportionalSplitHoriz(8,48,8);\r\n\t\tvar mainPair = storeMainStore[1].subDivideVert(2);\r\n\t\tvar playerRects = [mainPair[0].subDivideHoriz(6), mainPair[1].subDivideHoriz(6)];\r\n\t\t// reverse top layer because storehouse on left\r\n\t\tfor (var k = 0;k<3;k++) {\r\n\t\t\tvar temp = playerRects[0][k];\r\n\t\t\tplayerRects[0][k] = playerRects[0][5-k];\r\n\t\t\tplayerRects[0][5-k] = temp;\r\n\t\t}\r\n\t\tvar storehouses = [storeMainStore[0],storeMainStore[2]];\r\n\t\tvar playerSeeds = this.seedCounts.length>>1;\r\n\t\tfor (var i = 0;i<2;i++) {\r\n\t\t\tvar player = playerRects[i];\r\n\t\t\tvar storehouse = storehouses[i];\r\n\t\t\tvar r:Rectangle;\r\n\t\t\tfor (var j = 0;j<playerSeeds;j++) {\r\n\t\t\t\tvar seed = (i*playerSeeds)+j;\r\n\t\t\t\tvar seedCount = this.seedCounts[seed];\r\n\t\t\t\tif (j==(playerSeeds-1)) {\r\n\t\t\t\t\tr = storehouse;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tr = player[j];\r\n\t\t\t\t}\r\n\t\t\t\tthis.seedCircleRect(r,seedCount,board,seed);\r\n\t\t\t\tif (seedCount==0) {\r\n\t\t\t\t\t// clear\r\n\t\t\t\t\tthis.config[seed] = new Array<SeedCoords>();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn board;\r\n\t}\r\n}\r\n}\r\n`;\r\n\r\nexport const debuggableFile = `# VS Code Mock Debug\r\n\r\nThis is a starter sample for developing VS Code debug adapters.\r\n\r\n**Mock Debug** simulates a debug adapter for Visual Studio Code.\r\nIt supports *step*, *continue*, *breakpoints*, *exceptions*, and\r\n*variable access* but it is not connected to any real debugger.\r\n\r\nThe sample is meant as an educational piece showing how to implement a debug\r\nadapter for VS Code. It can be used as a starting point for developing a real adapter.\r\n\r\nMore information about how to develop a new debug adapter can be found\r\n[here](https://code.visualstudio.com/docs/extensions/example-debuggers).\r\nOr discuss debug adapters on Gitter:\r\n[![Gitter Chat](https://img.shields.io/badge/chat-online-brightgreen.svg)](https://gitter.im/Microsoft/vscode)\r\n\r\n## Using Mock Debug\r\n\r\n* Install the **Mock Debug** extension in VS Code.\r\n* Create a new 'program' file 'readme.md' and enter several lines of arbitrary text.\r\n* Switch to the debug viewlet and press the gear dropdown.\r\n* Select the debug environment \"Mock Debug\".\r\n* Press the green 'play' button to start debugging.\r\n\r\nYou can now 'step through' the 'readme.md' file, set and hit breakpoints, and run into exceptions (if the word exception appears in a line).\r\n\r\n![Mock Debug](file.jpg)\r\n\r\n## Build and Run\r\n\r\n[![build status](https://travis-ci.org/Microsoft/vscode-mock-debug.svg?branch=master)](https://travis-ci.org/Microsoft/vscode-mock-debug)\r\n[![build status](https://ci.appveyor.com/api/projects/status/empmw5q1tk6h1fly/branch/master?svg=true)](https://ci.appveyor.com/project/weinand/vscode-mock-debug)\r\n\r\n\r\n* Clone the project [https://github.com/Microsoft/vscode-mock-debug.git](https://github.com/Microsoft/vscode-mock-debug.git)\r\n* Open the project folder in VS Code.\r\n* Press 'F5' to build and launch Mock Debug in another VS Code window. In that window:\r\n* Open a new workspace, create a new 'program' file 'readme.md' and enter several lines of arbitrary text.\r\n* Switch to the debug viewlet and press the gear dropdown.\r\n* Select the debug environment \"Mock Debug\".\r\n* Press 'F5' to start debugging.`;\r\n\r\nexport function getImageFile(): Uint8Array {\r\n\tconst data = atob(`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`);\r\n\treturn Uint8Array.from([...data].map(x => x.charCodeAt(0)));\r\n}\r\n\r\n// encoded from 'АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмнопрстуфхцчшщъыьэюя'\r\nexport const windows1251File = Uint8Array.from([192, 193, 194, 195, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213, 214, 215, 216, 217, 218, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, 233, 234, 235, 236, 237, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255]);\r\n\r\n// encoded from '中国abc'\r\nexport const gbkFile = Uint8Array.from([214, 208, 185, 250, 97, 98, 99]);\r\n"],"sourceRoot":""}